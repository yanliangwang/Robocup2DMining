#!/usr/bin/env python
#!/usr/bin env python3.4
import re
from  lib.OpenFile  import *
from  lib.Team      import *
from  lib.Kick      import *




if __name__=="__main__":
	path="./log/201704040927-Miracle_2D_4_2-vs-YuShan2017_4_3"
	rcl=OpenFile(path).read_rcl()
	rcg=OpenFile(path).read_rcg()
	team_l,team_r=Team(rcg).get_team_name()
	team_l_tackle_cycle=Tackle(rcl,rcg,team_l).get_team_tackle_cycle()
	print(team_l+" Tackle count:"+str(len(team_l_tackle_cycle)))
	
	l_best_tackle=0
	n=0
	
	
	all_kick_data=Kick(rcl,rcg).get_all_kick_data()
	for  i  in  team_l_tackle_cycle:
		while n<len(all_kick_data):
			if all_kick_data[n][0]>i and  all_kick_data[n][1] == team_l and  all_kick_data[n-1][0]<i:
				l_best_tackle+=1
				#print(all_kick_data[n])
				break
			n+=1
			
			
				
			
	print(team_l+"铲球以后球权转换次数:"+str(l_best_tackle))
	

	
	
	
	
	
	
	team_r_tackle_cycle=Tackle(rcl,rcg,team_r).get_team_tackle_cycle()
	print(team_r+" Tackle count:"+str(len(team_r_tackle_cycle)))
	
	r_best_tackle=0
	n=0
	for i in team_r_tackle_cycle:
		while n < len(all_kick_data):
			if all_kick_data[n][0] > i and all_kick_data[n][1] == team_l and all_kick_data[n - 1][0] < i:
				r_best_tackle += 1
				#print(all_kick_data[n])
				break
			n += 1
	
	print(team_r + "铲球以后球权转换次数:" + str(r_best_tackle))
	

